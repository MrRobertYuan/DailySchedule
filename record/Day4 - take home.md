# Day4 - take home

## Practice

### BOX

å¦‚æœæƒ³ç”¨ `str` å¿…é¡»å€ŸåŠ© box

```
let s:Box<str> = "hello".into();
// æ­¤æ—¶ &s : &str
```

Box è¿™ä¸ªè¿˜æœ‰ç‚¹å¥‡æ€ªï¼Œæ˜¨å¤©çš„é—®é¢˜ä¹Ÿæ¶‰åŠåˆ°äº†è¿™ä¸ª

```
let s:Box<&str> = "hello".into();
// æ­¤æ—¶ *s: &str
```



### ç©ºå­—ç¬¦ä¸²

```
let s = String::new();
```

è¿™ä¸ªå‡½æ•°å¯ä»¥ç”Ÿæˆåˆå§‹å¤§å°ä¸º n çš„String

```
let s = String::with_capacity(n);
```



### è½¬ä¹‰å­—ç¬¦ä¸²

```
\u{}	// ç”¨æ¥å†™ Unicode å­—ç¬¦
```

```
"......\		// å¯ä»¥ç”¨æ¥å†™å¤šè¡Œå­—ç¬¦ä¸²
........"
```



æ˜“é”™ç‚¹ï¼š

```
    let long_delimiter = r###"Hello, "##""###;
    assert_eq!(long_delimiter, "Hello, \"##\"")
```

ä¸‹é¢è¿™ä¸ªå¼å­å…¶å®æ¯”è¾ƒçš„æ˜¯ long_delimiter å’Œ Hello, "##"

åªæ˜¯å› ä¸º " éœ€è¦è½¬ä¹‰ï¼Œæ‰€ä»¥æ‰è¿™æ ·çš„ã€‚



### åˆ‡ç‰‡

```
fn main() {
    let arr: [char; 3] = ['ä¸­', 'å›½', 'äºº'];

    let slice = &arr[..2];
    
    println!("{:?}", slice);
    
    // ä¿®æ”¹æ•°å­— `8` è®©ä»£ç å·¥ä½œ
    // å°æç¤º: åˆ‡ç‰‡å’Œæ•°ç»„ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å¼•ç”¨ã€‚å¦‚æœæ˜¯æ•°ç»„çš„è¯ï¼Œé‚£ä¸‹é¢çš„ `assert!` å°†ä¼šé€šè¿‡ï¼š 'ä¸­'å’Œ'å›½'æ˜¯charç±»å‹ï¼Œcharç±»å‹æ˜¯Unicodeç¼–ç ï¼Œå¤§å°å›ºå®šä¸º4å­—èŠ‚ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸º8å­—èŠ‚ã€‚
    assert!(std::mem::size_of_val(&slice) == 16);
}
```

æ³¨æ„è¿™é‡Œæ˜¯å­—ç¬¦æ•°ç»„è€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼

ç„¶åè¿™é‡Œæ±‚çš„ä¹Ÿæ˜¯ `&slice` è€Œä¸æ˜¯ `slice` çš„å¤§å°ï¼Œ`slice` çš„å¤§å°æ˜¯ 2*4 = 8ï¼Œè€Œä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨çš„å¤§å°æ˜¯ä¸¤ä¸ªå­—(usize)

```
fn main() {
    let arr = ['ä¸­', 'å›½', 'äºº'];

    let slice = &arr[0..2];
    
    // ä¿®æ”¹æ•°å­— `8` è®©ä»£ç å·¥ä½œ
    // å°æç¤º: åˆ‡ç‰‡å’Œæ•°ç»„ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å¼•ç”¨ã€‚å¦‚æœæ˜¯æ•°ç»„çš„è¯ï¼Œé‚£ä¸‹é¢çš„ `assert!` å°†ä¼šé€šè¿‡ï¼š 'ä¸­'å’Œ'å›½'æ˜¯charç±»å‹ï¼Œcharç±»å‹æ˜¯Unicodeç¼–ç ï¼Œå¤§å°å›ºå®šä¸º4å­—èŠ‚ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸º8å­—èŠ‚ã€‚
    assert!(std::mem::size_of_val(slice) == 8);
}
```

æ‰€ä»¥è¿™æ ·ä¹Ÿæ˜¯å¯¹çš„ã€‚



### String & &str

String è½¬ä¸º &str æœ‰ä¸¤ç§æ–¹æ³•

```
str = &string
str = string.as_str()
```



è®°å¾—å¯ä»¥ä½¿ç”¨å¯å˜å¼•ç”¨æ¥æ”¹å˜å­—ç¬¦ä¸²çš„å€¼

```
let slice3: &mut String = &mut s;
```



éå†ä¸€ä¸ª UTF-8 å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—ç¬¦

```
for (i,c) in s.chars().enumerate()
```



å¦‚æœæƒ³æŒ‰ç…§åˆ‡ç‰‡ä¸€æ ·å¯¹ UTF-8 å­—ç¬¦å–æ®µï¼Œä½¿ç”¨`utf8_slice`

```
use utf8_slice;
fn main() {
   let s = "The ğŸš€ goes to the ğŸŒ‘!";

   let rocket = utf8_slice::slice(s, 4, 5);
   // Will equal "ğŸš€"
}
```



å¦‚æœæƒ³é€šè¿‡å­—èŠ‚æ•°ç»„è½¬æˆ Stringï¼Œä½¿ç”¨`from_utf8()` 

```
let v = vec![104, 101, 108, 108, 111];

// å°†å­—èŠ‚æ•°ç»„è½¬æ¢æˆ String
let s1 = String::from_utf8(v).unwrap();    
```

**ç–‘é—®ï¼šunwrap() å‡½æ•°çš„ä½œç”¨**



### å­—ç¬¦ä¸²çš„å‡½æ•°

```
s.as_mut_ptr();
s.len();
s.capcacity();
```

